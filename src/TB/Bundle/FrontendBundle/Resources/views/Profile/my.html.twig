{% extends '::base.html.twig' %}

{% block title %}My Profile{% endblock %}

{% block stylesheets %}
<link href="{{ asset('assets/css/common_cards.css') }}" rel="stylesheet" type="text/css">
<link href="{{ asset('assets/css/user.css') }}" rel="stylesheet" type="text/css">
{% endblock %}

{% block body %}
<script>
var TB_APP = 'UserApp';
{% if user.location %}
var TB_USER_LONG = {{ user.location.longitude }};
var TB_USER_LAT = {{ user.location.latitude }};
{% endif %}
</script>

{{ include('TBFrontendBundle:Profile:_userHeader.html.twig', [user]) }}	

<div class="panel_content">
	<div class="crumb_content fixed_content">
	  <div id="bigbar">
        {{ include('TBFrontendBundle:Default:breadcrumb.html.twig', breadcrumb) }}
        {{ include('TBFrontendBundle:Default:share.html.twig') }}
      </div>
    </div>
                        
    <div class="panels clearfix">           
    	<div class="mytrails_title_content fixed_content">    		
      	  <h2 class="tb tb-title">My Trails</h2>
    	</div>

    	<div class="mytrails_content fixed_content">    	
	  	  <div class="panels clearfix">
          {% if unpublishedRoutes %}
			  {% for route in unpublishedRoutes %}
	   	      <div class="panel trail_card trail_card_panel">
		        <div class="title"><h3 class="tb">DRAFT Trail</h3></div>
	            <a href="{{ path('trail', {'trailSlug': route.slug}) }}">
	            <div class="photo tb-photo-btn">
	              <div class="image_container"><img src="http://app.resrc.it/O=80/http://s3-eu-west-1.amazonaws.com/{{ route.media.versions[0].path }}" class="resrc scale" border="0"/></div>
		          <div class="card_title">
					<h1>{{ route.name}}</h1>
					<br/>
					<h1>{{ route.region }}</h1>
		          </div>
	            </div>
	          	</a>
		      	<div class="summary">
		          <div class="tb-avatar"><div class="photo"><a href="profile/{{ user.name }}"><img src="https://s3-eu-west-1.amazonaws.com/trailburning-assets/images/profile/{{ user.name }}/avatar.jpg"></a></div></div>
		          <div class="detail">
		            by <strong>{{ user.firstName }} {{ user.lastName }}</strong>
		            <div class="stars">
		              <div class="star_full"></div>
		              <div class="star_full"></div>
		              <div class="star_full"></div>
		              <div class="star_half"></div>
		              <div class="star"></div>
		            </div>
		            <br/>
                    <a href="{{ path('trailmaker', {id: route.id}) }}">edit</a>
                    <a href="{{ path('publish_trail', {id: route.id}) }}">publish</a>
		          </div>
		        </div>
	          </div>
			  {% endfor %}
		  {% endif %}
    			
          {% if publishedRoutes %}
			  {% for route in publishedRoutes %}
	   	      <div class="panel trail_card trail_card_panel">
		        <div class="title"><h3 class="tb">Trail</h3></div>
	            <a href="{{ path('trail', {'trailSlug': route.slug}) }}">
	            <div class="photo tb-photo-btn">
	              <div class="image_container"><img src="http://app.resrc.it/O=80/http://s3-eu-west-1.amazonaws.com/{{ route.media.versions[0].path }}" class="resrc scale" border="0"/></div>
		          <div class="card_title">
					<h1>{{ route.name}}</h1>
					<br/>
					<h1>{{ route.region }}</h1>
		          </div>
	            </div>
	          	</a>
		      	<div class="summary">
		          <div class="tb-avatar"><div class="photo"><a href="profile/{{ user.name }}"><img src="https://s3-eu-west-1.amazonaws.com/trailburning-assets/images/profile/{{ user.name }}/avatar.jpg"></a></div></div>
		          <div class="detail">
		            by <strong>{{ user.firstName }} {{ user.lastName }}</strong>
		            <div class="stars">
		              <div class="star_full"></div>
		              <div class="star_full"></div>
		              <div class="star_full"></div>
		              <div class="star_half"></div>
		              <div class="star"></div>
		            </div>
		            <br/>
					<a href="{{ path('trailmaker', {id: route.id}) }}">edit</a>
                    <a href="{{ path('unpublish_trail', {id: route.id}) }}">unpublish</a>		            
		          </div>
		        </div>
	          </div>
			  {% endfor %}
		  {% endif %}
	      </div>	      
		  		  
    	</div>
	</div>
</div>
{% endblock %}

{% block javascripts %}

<script type="text/template" id="profileMapViewTemplate">
	<div id='profile_map'></div>
	<div id='profile_map_overlay'></div>
</script>

{% endblock %}