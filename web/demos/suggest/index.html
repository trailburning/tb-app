<!doctype html>
<html lang="en">
<head>
    <meta charset="utf-8" />
    <title>selbst.de - Test Suche</title>
    <link rel="stylesheet" href="http://code.jquery.com/ui/1.10.2/themes/smoothness/jquery-ui.css" />
    <script src="http://code.jquery.com/jquery-1.7.2.js"></script>
    <script src="http://code.jquery.com/ui/1.10.2/jquery-ui.js"></script>
    <style>
        .ui-autocomplete-loading {
            background: white url('http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.2/themes/smoothness/images/ui-anim_basic_16x16.gif') right center no-repeat;
        }
        .ui-autocomplete {
            float: right;
            font-size: .9em;
        }
        .ui-autocomplete li span {
            float: right;
        }
    </style>
    <script>

        $(function() {
            var cache = {};
            
            $('#q').autocomplete({
                minLength: 2,
                delay: 0,
                source: function(request, response ) {
                    var term = request.term;
                    if (term in cache) {
                        response(cache[term]);
                        return;
                    }
//                    var url = 'http://localhost:8888/trailburning_api/app_dev.php/v1/search/suggest?q=' + term;
                    var url = 'http://192.168.178.197:8888/trailburning_api/app_dev.php/v1/search/suggest?q=' + term;
                    $.getJSON(url, request, function( data, status, xhr ) {
                        var suggestions = data.hits.hits;
                        cache[term] = suggestions;
                        response(suggestions);
                    });
                }
            }).data('ui-autocomplete')._renderItem = function(ul, item) {
                return $('<li>')
                    .append('<a>' + item._source.suggest_text + '</a>')
                    .appendTo(ul);
            };
        });
    </script>
</head>
<body>
<form name="search" method="GET" action="index.php">
    <div class="ui-widget">
        <input id="q" name="q" size="50" value="" />
    </div> 
</form>

</body>
</html>